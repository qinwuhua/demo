<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "/xsd/mybatis-3-mapper.dtd">
<mapper namespace="com.hdsx.jxzhpt.jckwqgzsj">
	<delete id="deleteqlzpbyxmbm" parameterType="jckwqgzsj">
		delete from plan_upload where parentid=#{id}
	</delete>
	<insert id="insertWqgz" parameterType="jckwqgzsj">
		insert into xmk_wqgz(id,qlmc,qlbh,xzqhmc,xzqhdm,lxmc,lxbm,gydw,gydwbm,xjgjnd,jsdj,pddj,qlzxzh,qlkd,qlqc,
		kjzc,dkzdkj,akjfl,sbjgxs,bhnr,bz,tbbmbm,xmnf,xmtype,tbsj,sbzt,sbthcd,tsdq,qlyhgcs,qljggcs,czyjhjy,SFYLRBWQK) 
		values(#{id},#{qlmc},#{qlbh},#{xzqhmc},#{xzqhdm},#{lxmc},#{lxbm},#{gydw},
		(select id from xtgl_department where name=#{gydw}),#{xjgjnd},#{jsdj},
		#{pddj},#{qlzxzh},#{qlkd},#{qlqc},#{kjzc},#{dkzdkj},#{akjfl},#{sbjgxs},#{bhnr},#{bz},#{tbbmbm},#{xmnf},#{xmtype},
		sysdate,'未上报',#{sbthcd},#{tsdq},#{qlyhgcs},#{qljggcs},#{czyjhjy},'否')
	</insert>
	
		<select id="selectWqgzList" parameterType="jckwqgzsj" resultType="jckwqgzsj">
	 	select * from (
	 		select rownum num ,t.*,decode(sbthcd,#{sbthcd},'未上报',sbzt) sbzt2,to_char(wqrksj,'yyyy-mm-dd') xmrksj from xmk_wqgz t where 1=1 and t.SFYLRBWQK='否'
	 			and  sbthcd &lt;=#{sbthcd}
	 		<if test="gydw!='' and gydw!= null ">
				${gydw}
			</if>
			<if test="xzqhdm!='' and xzqhdm!= null ">
				${xzqhdm}
			</if>
	 		<if test="lxmc!='' and lxmc!= null ">
	 			and lxmc like '%'||(#{lxmc})||'%'
	 		</if>
	 		<if test="qlmc!='' and qlmc!= null ">
	 			and qlmc like '%'||(#{qlmc})||'%'
	 		</if>
	 		<if test="xmnf!='' and xmnf!= null ">
	 			and xmnf like '%'||(#{xmnf})||'%'
	 		</if>
	 		<if test="xmtype!='' and xmtype!= null ">
	 			and xmtype like '%'||(#{xmtype})||'%'
	 		</if>
	 		<if test="sbzt!='' and sbzt!= null ">
	 			and decode(sbthcd,#{sbthcd},'未上报',sbzt) like '%'||(#{sbzt})||'%'
	 		</if>
	 		<if test="jsdj!='' and jsdj!= null ">
	 			and jsdj like '%'||(#{jsdj})||'%'
	 		</if>
	 		<if test="akjfl!='' and akjfl!= null ">
	 			and akjfl like '%'||(#{akjfl})||'%'
	 		</if>
	 		<if test="lxbm!='' and lxbm!= null ">
	 			and lxbm like '%'||(#{lxbm})||'%'
	 		</if>
	 		<if test="qlbh!='' and qlbh!= null ">
	 			and qlbh like '%'||(#{qlbh})||'%'
	 		</if>
	 		<if test="tsdq!='' and tsdq!= null ">
	 			and tsdq like '%'||(#{tsdq})||'%'
	 		</if>
	 			) t1 where t1.num &lt;=(#{page} * #{rows}) and t1.num>(#{page}-1)*#{rows} 
	 			order by decode(sbthcd,#{sbthcd},'未上报',sbzt),shzt desc 
	 </select>
	  <select id="selectWqgzCount" parameterType="jckwqgzsj" resultType="int">
	 		select count(*) from xmk_wqgz t where 1=1 and t.SFYLRBWQK='否'
	 			and  sbthcd &lt;=#{sbthcd}
	 		<if test="gydw!='' and gydw!= null ">
				${gydw}
			</if>
			<if test="xzqhdm!='' and xzqhdm!= null ">
				${xzqhdm}
			</if>
	 		<if test="lxmc!='' and lxmc!= null ">
	 			and lxmc like '%'||(#{lxmc})||'%'
	 		</if>
	 		<if test="qlmc!='' and qlmc!= null ">
	 			and qlmc like '%'||(#{qlmc})||'%'
	 		</if>
	 		<if test="xmnf!='' and xmnf!= null ">
	 			and xmnf like '%'||(#{xmnf})||'%'
	 		</if>
	 		<if test="xmtype!='' and xmtype!= null ">
	 			and xmtype like '%'||(#{xmtype})||'%'
	 		</if>
	 		<if test="sbzt!='' and sbzt!= null ">
	 			and decode(sbthcd,#{sbthcd},'未上报',sbzt) like '%'||(#{sbzt})||'%'
	 		</if>
	 		<if test="jsdj!='' and jsdj!= null ">
	 			and jsdj like '%'||(#{jsdj})||'%'
	 		</if>
	 		<if test="akjfl!='' and akjfl!= null ">
	 			and akjfl like '%'||(#{akjfl})||'%'
	 		</if>
	 		<if test="lxbm!='' and lxbm!= null ">
	 			and lxbm like '%'||(#{lxbm})||'%'
	 		</if>
	 		<if test="qlbh!='' and qlbh!= null ">
	 			and qlbh like '%'||(#{qlbh})||'%'
	 		</if>
	 		<if test="tsdq!='' and tsdq!= null ">
	 			and tsdq like '%'||(#{tsdq})||'%'
	 		</if>
		 </select>
		 <delete id="deleteWqgzsjById" parameterType="java.util.List" >
		 	delete from xmk_wqgz where id =#{String}
		 </delete>
		 <select id="getwqgzZP1" resultType="plan_upload" parameterType="jckwqgzsj">
		 	select id from plan_upload where parentid=#{id} and filetype='桥梁正面文件'
		 </select>
		 <select id="getwqgzZP2" resultType="plan_upload" parameterType="jckwqgzsj">
		 	select id from plan_upload where parentid=#{id} and filetype='桥梁侧面文件'
		 </select>
		 <update id="xgJckwqgzSbzt" parameterType="hashmap" >
 			update xmk_wqgz set sbzt='已上报',sbsj=sysdate,sbbm=#{sbbm},sbthcd=#{sbthcd} where id =#{id}
 		</update>
 		 <update id="shtyWqgzsjById" parameterType="jckwqgzsj" >
 			update xmk_wqgz set sbzt='已上报',sbsj=sysdate,sbbm=#{sbbm},sbthcd=#{sbthcd},shzt1='已审核',shyj1='同意' where id =#{id} 
 		</update>
 		<update id="shbtyWqgzsjById" parameterType="jckwqgzsj" >
 			update xmk_wqgz set sbzt='未上报',sbsj=sysdate,sbbm=#{sbbm},sbthcd=#{sbthcd},shzt1='未审核',shyj1=#{shyj1} where id =#{id} 
 		</update>
 		<select id="selectJckShwqgz" parameterType="jckwqgzsj" resultType="jckwqgzsj">
 	select * from (
 		select rownum num ,t.*,to_char(wqrksj,'yyyy-mm-dd') xmrksj from xmk_wqgz t where sbthcd=7 and t.SFYLRBWQK='否'
			and sbthcd>=#{sbthcd}
 		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
 		<if test="lxmc!='' and lxmc!= null ">
 			and lxmc like '%'||(#{lxmc})||'%'
 		</if>
 		<if test="qlmc!='' and qlmc!= null ">
 			and qlmc like '%'||(#{qlmc})||'%'
 		</if>
 		<if test="xmnf!='' and xmnf!= null ">
 			and xmnf like '%'||(#{xmnf})||'%'
 		</if>
 		<if test="xmtype!='' and xmtype!= null ">
 			and xmtype like '%'||(#{xmtype})||'%'
 		</if>
 		<if test="shzt!='' and shzt!= null ">
 			and shzt like '%'||(#{shzt})||'%'
 		</if>
 		<if test="jsdj!='' and jsdj!= null ">
 			and jsdj like '%'||(#{jsdj})||'%'
 		</if>
 		<if test="akjfl!='' and akjfl!= null ">
 			and akjfl like '%'||(#{akjfl})||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
 			and lxbm like '%'||(#{lxbm})||'%'
 		</if>
 		<if test="qlbh!='' and qlbh!= null ">
 			and qlbh like '%'||(#{qlbh})||'%'
 		</if>
 		<if test="tsdq!='' and tsdq!= null ">
 			and tsdq like '%'||(#{tsdq})||'%'
 		</if>
 			) t1 where t1.num &lt;=(#{page} * #{rows}) and t1.num>(#{page}-1)*#{rows} 
 			order by shzt desc
 </select>
  <select id="selectWqgzShCount" parameterType="jckwqgz" resultType="int">
 		select count(*) from xmk_wqgz t where sbthcd=7 and t.SFYLRBWQK='否'
			and sbthcd>=#{sbthcd}
 		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
 		<if test="lxmc!='' and lxmc!= null ">
 			and lxmc like '%'||(#{lxmc})||'%'
 		</if>
 		<if test="qlmc!='' and qlmc!= null ">
 			and qlmc like '%'||(#{qlmc})||'%'
 		</if>
 		<if test="xmnf!='' and xmnf!= null ">
 			and xmnf like '%'||(#{xmnf})||'%'
 		</if>
 		<if test="xmtype!='' and xmtype!= null ">
 			and xmtype like '%'||(#{xmtype})||'%'
 		</if>
 		<if test="shzt!='' and shzt!= null ">
 			and shzt like '%'||(#{shzt})||'%'
 		</if>
 		<if test="jsdj!='' and jsdj!= null ">
 			and jsdj like '%'||(#{jsdj})||'%'
 		</if>
 		<if test="akjfl!='' and akjfl!= null ">
 			and akjfl like '%'||(#{akjfl})||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
 			and lxbm like '%'||(#{lxbm})||'%'
 		</if>
 		<if test="qlbh!='' and qlbh!= null ">
 			and qlbh like '%'||(#{qlbh})||'%'
 		</if>
 		<if test="tsdq!='' and tsdq!= null ">
 			and tsdq like '%'||(#{tsdq})||'%'
 		</if>
 </select>
 
 		<update id="sjshtyWqgzsjById" parameterType="jckwqgzsj" >
 			update xmk_wqgz set shzt='已审核',shsj=sysdate,shbm=#{shbm},sbthcd=#{sbthcd},shyj2='同意' where id =#{id} 
 		</update>
 		<update id="sjshbtyWqgzsjById" parameterType="jckwqgzsj" >
 			update xmk_wqgz set shzt='未审核',shsj=sysdate,shbm=#{shbm},sbthcd=#{sbthcd},shzt1='未审核',shyj2=#{shyj2} where id =#{id} 
 		</update>
 		<update id="updateWqgz" parameterType="jckwqgzsj">
 			update xmk_wqgz set xmnf=#{xmnf},bhnr=#{bhnr},bz=#{bz},qlyhgcs=#{qlyhgcs},qljggcs=#{qljggcs},
 			czyjhjy=#{czyjhjy} where id=#{id}
 		</update>
 		
 		<select id="selectSckwqgz" parameterType="jckwqgzsj" resultType="jckwqgzsj">
		select * from (
		select rownum num ,t.*,decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) sck_sbzt2,to_char(wqrksj,'yyyy-mm-dd') xmrksj from
		 (select * from sck_wqgz t join xmk_wqgz on xmkid=xmk_wqgz.id where 1=1 and t.SFYLRBWQK='否'
 				<if test="tsdq!='' and tsdq!= null ">
 				and xmk_wqgz.tsdq like '%'||#{tsdq}||'%'
 				</if>) t where 
			sck_sbthcd &lt;=#{sck_sbthcd}
		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
		<if test="lxmc!='' and lxmc!= null ">
			and lxmc like '%'||(#{lxmc})||'%'
		</if>
		<if test="qlmc!='' and qlmc!= null ">
			and qlmc like '%'||(#{qlmc})||'%'
		</if>
		<if test="xmnf!='' and xmnf!= null ">
			and scxmnf like '%'||(#{xmnf})||'%'
		</if>
		<if test="xmtype!='' and xmtype!= null ">
			and xmtype like '%'||(#{xmtype})||'%'
		</if>
		<if test="sbzt!='' and sbzt!= null ">
			and decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) like '%'||(#{sbzt})||'%'
		</if>
		<if test="jsdj!='' and jsdj!= null ">
			and jsdj like '%'||(#{jsdj})||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and akjfl like #{akjfl}||'%'
		</if>
		<if test="bzls!='' and bzls!= null ">
 			and bzls like #{bzls}||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
			and lxbm like '%'||(#{lxbm})||'%'
		</if>
		<if test="qlbh!='' and qlbh!= null ">
			and qlbh like '%'||(#{qlbh})||'%'
		</if>
		) t1 where t1.num &lt;=(#{page} * #{rows}) and
		t1.num>(#{page}-1)*#{rows}
		order by decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt),sck_shzt desc
	</select>
	<select id="selectSckwqgzCount" parameterType="jckwqgzsj" resultType="int">
		select count(*) from (select * from sck_wqgz t join xmk_wqgz on xmkid=xmk_wqgz.id where 1=1 and t.SFYLRBWQK='否'
 				<if test="tsdq!='' and tsdq!= null ">
 				and xmk_wqgz.tsdq like '%'||#{tsdq}||'%'
 				</if>)
			where sck_sbthcd &lt;=#{sck_sbthcd}
		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
		<if test="lxmc!='' and lxmc!= null ">
			and lxmc like '%'||(#{lxmc})||'%'
		</if>
		<if test="qlmc!='' and qlmc!= null ">
			and qlmc like '%'||(#{qlmc})||'%'
		</if>
		<if test="xmnf!='' and xmnf!= null ">
			and scxmnf like '%'||(#{xmnf})||'%'
		</if>
		<if test="xmtype!='' and xmtype!= null ">
			and xmtype like '%'||(#{xmtype})||'%'
		</if>
		<if test="sbzt!='' and sbzt!= null ">
			and decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) like '%'||(#{sbzt})||'%'
		</if>
		<if test="jsdj!='' and jsdj!= null ">
			and jsdj like '%'||(#{jsdj})||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and akjfl like #{akjfl}||'%'
		</if>
		<if test="bzls!='' and bzls!= null ">
 			and bzls like #{bzls}||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
			and lxbm like '%'||(#{lxbm})||'%'
		</if>
		<if test="qlbh!='' and qlbh!= null ">
			and qlbh like '%'||(#{qlbh})||'%'
		</if>
	</select>
	 <select id="JckWqgzRoad" parameterType="hashmap" resultType="jckwqgzsj">
	 	select t.*,to_char(wqrksj,'yyyy-mm-dd') xmrksj from xmk_wqgz t where shzt='已审核' and t.SFYLRBWQK='否' and qlbh like #{qlbh}||'%' 
	 	<if test="gydwbm!='' and gydwbm!= null ">
				and tbbmbm in(select id from xtgl_department where id like #{gydwbm} ||'%' or parent like #{gydwbm} ||'%') 
			</if>
	 	order by qlbh
 </select>
 
 	<insert id="insertSckwqgz" parameterType="jckwqgzsj">
		insert into
		sck_wqgz(sckid,xmkid,tzgs,spwh,fapgdw,fascdw,faspsj,jsxz,jsnr,scbz,scbmbm,sck_sbzt,sck_qlbh,sck_qlzxzh,
		sck_lxbm,sck_sbthcd,lrjh,bzls,scxmnf,scqlqc,scqlqk,sjdwmc,jsgmqc,jsgmqk,hzdj,sjhspl,sck_sbjgxs,kjzh,sck_xbjgxs,ztz,sgtpfsj,pfwh,zgq,sfylrbwqk)
		values(#{sckid},#{xmkid},#{tzgs},#{spwh},#{fapgdw},#{fascdw},#{faspsj},#{jsxz},#{jsnr},#{scbz},
		#{scbmbm},'未上报',#{qlbh},#{qlzxzh},#{lxbm},#{sck_sbthcd},'未列入',#{bzls},#{scxmnf},#{scqlqc},#{scqlqk},#{sjdwmc},#{jsgmqc},#{jsgmqk},#{hzdj},#{sjhspl},#{sck_sbjgxs},#{kjzh},#{sck_xbjgxs},#{ztz},#{sgtpfsj},#{pfwh},#{zgq},'否')
	</insert>
	<delete id="deleteSckWqgz" parameterType="java.util.List" >
	 	delete from sck_wqgz where sckid =#{String}
	</delete>
	<update id="xgSckWqgzSbzt" parameterType="hashmap" >
 		update sck_wqgz set sck_sbzt='已上报',sck_sbsj=sysdate,sck_sbbm=#{sbbm},sck_sbthcd=#{sbthcd} where sckid =#{id}
	</update>
 	 <update id="shtyWqgzsckById" parameterType="jckwqgzsj" >
		update sck_wqgz set sck_sbzt='已上报',sck_sbsj=sysdate,sck_sbbm=#{sbbm},sck_sbthcd=#{sbthcd},sck_shzt1='已审核',sck_shyj1='同意' where sckid =#{id} 
	</update>
	<update id="shbtyWqgzsckById" parameterType="jckwqgzsj" >
		update sck_wqgz set sck_sbzt='未上报',sck_sbsj=sysdate,sck_sbbm=#{sbbm},sck_sbthcd=#{sbthcd},sck_shzt1='未审核',sck_shyj1=#{shyj1} where sckid =#{id} 
	</update>	
 	<update id="updateSckwqgz" parameterType="jckwqgzsj">
		update sck_wqgz
		set tzgs=#{tzgs},spwh=#{spwh},fapgdw=#{fapgdw},fascdw=#{fascdw},faspsj=#{faspsj},jsxz=#{jsxz},jsnr=#{jsnr},scbz=#{scbz},
		scxmnf=#{scxmnf},scqlqc=#{scqlqc},scqlqk=#{scqlqk},sjdwmc=#{sjdwmc},jsgmqc=#{jsgmqc},
		jsgmqk=#{jsgmqk},hzdj=#{hzdj},sjhspl=#{sjhspl},sck_sbjgxs=#{sck_sbjgxs},kjzh=#{kjzh},sck_xbjgxs=#{sck_xbjgxs},
		ztz=#{ztz},sgtpfsj=#{sgtpfsj},pfwh=#{pfwh},zgq=#{zgq} where sckid=#{sckid}
	</update>
 	<select id="selectSckShwqgz" parameterType="jckwqgzsj" resultType="jckwqgzsj">
		select * from (
		select rownum num ,t.*,decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) sck_sbzt2,to_char(wqrksj,'yyyy-mm-dd') xmrksj from
		 (select * from sck_wqgz t join xmk_wqgz on xmkid=xmk_wqgz.id where 1=1 and t.SFYLRBWQK='否'
 				<if test="tsdq!='' and tsdq!= null ">
 				and xmk_wqgz.tsdq like '%'||#{tsdq}||'%'
 				</if>) t where 
			sck_sbthcd &lt;=7
		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
		<if test="lxmc!='' and lxmc!= null ">
			and lxmc like '%'||(#{lxmc})||'%'
		</if>
		<if test="qlmc!='' and qlmc!= null ">
			and qlmc like '%'||(#{qlmc})||'%'
		</if>
		<if test="xmnf!='' and xmnf!= null ">
			and scxmnf like '%'||(#{xmnf})||'%'
		</if>
		<if test="xmtype!='' and xmtype!= null ">
			and xmtype like '%'||(#{xmtype})||'%'
		</if>
		<if test="sbzt!='' and sbzt!= null ">
			and decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) like '%'||(#{sbzt})||'%'
		</if>
		<if test="jsdj!='' and jsdj!= null ">
			and jsdj like '%'||(#{jsdj})||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and akjfl like #{akjfl}||'%'
		</if>
		<if test="bzls!='' and bzls!= null ">
 			and bzls like #{bzls}||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
			and lxbm like '%'||(#{lxbm})||'%'
		</if>
		<if test="qlbh!='' and qlbh!= null ">
			and qlbh like '%'||(#{qlbh})||'%'
		</if>
		) t1 where t1.num &lt;=(#{page} * #{rows}) and
		t1.num>(#{page}-1)*#{rows}
		order by decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt),sck_shzt desc
	</select>
	<select id="selectSckShwqgzCount" parameterType="jckwqgzsj" resultType="int">
		select count(*) from (select * from sck_wqgz t join xmk_wqgz on xmkid=xmk_wqgz.id where 1=1 and t.SFYLRBWQK='否'
 				<if test="tsdq!='' and tsdq!= null ">
 				and xmk_wqgz.tsdq like '%'||#{tsdq}||'%'
 				</if>)
			where sck_sbthcd &lt;=7
		<if test="gydw!='' and gydw!= null ">
			${gydw}
		</if>
		<if test="xzqhdm!='' and xzqhdm!= null ">
			${xzqhdm}
		</if>
		<if test="lxmc!='' and lxmc!= null ">
			and lxmc like '%'||(#{lxmc})||'%'
		</if>
		<if test="qlmc!='' and qlmc!= null ">
			and qlmc like '%'||(#{qlmc})||'%'
		</if>
		<if test="xmnf!='' and xmnf!= null ">
			and scxmnf like '%'||(#{xmnf})||'%'
		</if>
		<if test="xmtype!='' and xmtype!= null ">
			and xmtype like '%'||(#{xmtype})||'%'
		</if>
		<if test="sbzt!='' and sbzt!= null ">
			and decode(sck_sbthcd,#{sck_sbthcd},'未上报',sck_sbzt) like '%'||(#{sbzt})||'%'
		</if>
		<if test="jsdj!='' and jsdj!= null ">
			and jsdj like '%'||(#{jsdj})||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and akjfl like #{akjfl}||'%'
		</if>
		<if test="bzls!='' and bzls!= null ">
 			and bzls like #{bzls}||'%'
 		</if>
 		<if test="lxbm!='' and lxbm!= null ">
			and lxbm like '%'||(#{lxbm})||'%'
		</if>
		<if test="qlbh!='' and qlbh!= null ">
			and qlbh like '%'||(#{qlbh})||'%'
		</if>
	</select>	
	<update id="sjshtyWqgzsjwqgz" parameterType="jckwqgzsj" >
		update sck_wqgz set sck_shzt='已审核',sck_shsj=sysdate,sck_shbm=#{shbm},sck_sbthcd=#{sbthcd},sck_shyj2='同意' where sckid =#{id} 
	</update>
	<update id="sjshbtyWqgzsjwqgz" parameterType="jckwqgzsj" >
		update sck_wqgz set sck_shzt='未审核',sck_shsj=sysdate,sck_shbm=#{shbm},sck_sbthcd=#{sbthcd},sck_shzt1='未审核',sck_shyj2=#{shyj2} where sckid =#{id} 
	</update>
	
	<insert id="lrjhSckwqgz"  parameterType="jckwqgzsj">
		insert into plan_wqgz(id,sckid,xdzt,sbnf,jh_sbthcd,shibz,shengbz) values(sys_guid(),#{id},'未下达',#{scxmnf},#{bz},#{shibz},#{shengbz})
	</insert>
	<select id="cxtiaojian" parameterType="jckwqgzsj" resultType="jckwqgzsj">
		select sckid,sc.jsxz,sc.sck_qlbh,scqlqk,scqlqc,xm.tsdq,xm.akjfl from sck_wqgz sc left join xmk_wqgz xm on sc.xmkid=xm.id
		where sckid=#{id}
	</select>
	<select id="selectshibz" parameterType="jckwqgzsj" resultType="wqbzbz">
		select * from xtgl_wqbzbz where 1=1 and bzjb='市级'
		<if test="sck_qlbh!='' and sck_qlbh!= null ">
			and jsdj like '%'||(substr(#{sck_qlbh},0,1))||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and qllx = #{akjfl}
		</if>
		<if test="jsxz!='' and jsxz!= null ">
			and jsxz = #{jsxz}
		</if>
	</select>
	<select id="selectshengbz" parameterType="jckwqgzsj" resultType="wqbzbz">
		select * from xtgl_wqbzbz where 1=1 and bzjb='省级'
		<if test="sck_qlbh!='' and sck_qlbh!= null ">
			and jsdj like '%'||(substr(#{sck_qlbh},0,1))||'%'
		</if>
		<if test="akjfl!='' and akjfl!= null ">
			and qllx = #{akjfl}
		</if>
		<if test="jsxz!='' and jsxz!= null ">
			and jsxz = #{jsxz}
		</if>
	</select>
</mapper>

