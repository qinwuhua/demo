<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "/xsd/mybatis-3-mapper.dtd">
<mapper namespace="com.hdsx.jxzhpt.gcglaqyb">

	<select id="selectaqyblist" parameterType="gcglaqyb" resultType="gcglaqyb">
		select * from (
		select m.*,rownum rn from (
			select * from GCGL_AQGLYBB 
			where 1=1
			<if test="uploadepartment != null and  uploadepartment != ''">
			and uploadepartment like '%'||trim(#{uploadepartment})||'%'
			</if>
			<if test="reportmonth != null and  reportmonth != ''">
			and reportmonth like '%'||trim(#{reportmonth})||'%'
			</if>
			<if test="filename != null and  filename != ''">
			and filename like '%'||trim(#{filename})||'%'
			</if>
			<if test="sendingunits != null and  sendingunits != ''">
			and sendingunits like '%'||trim(#{sendingunits})||'%'
			</if>
		order by to_number(substr(reportmonth,0,4))desc,to_number(replace(reportmonth,'-','')) desc
		)  m
			where <![CDATA[rownum<=(#{page} * #{rows})]]>
		) 
			where RN>((#{page} - 1) * #{rows})
		
	</select>
	<select id="selectaqyblistCount" parameterType="gcglaqyb" resultType="int">
		select count(*) from GCGL_AQGLYBB 
		where 1=1
		<if test="uploadepartment != null and  uploadepartment != ''">
		and uploadepartment like '%'||trim(#{uploadepartment})||'%'
		</if>
		<if test="reportmonth != null and  reportmonth != ''">
		and reportmonth like '%'||trim(#{reportmonth})||'%'
		</if>
		<if test="filename != null and  filename != ''">
		and filename like '%'||trim(#{filename})||'%'
		</if>
	</select>


	<select id="selAllBm3" parameterType="String" resultType="treenode">
	  select distinct x.id ,x.name text,parent ,'closed' state from xtgl_department x where  id like '%36%' order by to_number(id)
	</select>	
</mapper>