<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "/xsd/mybatis-3-mapper.dtd">
<mapper namespace="com.hdsx.jxzhpt.zdxx">

	<select id="selectZdxxList" parameterType="zdxx" resultType="zdxx">
		select * from (
		select m.*,rownum rn from (
			select * from ZDXXB
			where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{gydw}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
		order by tbsj desc
		)  m
			where <![CDATA[rownum<=(#{page} * #{rows})]]>
		) 
			where RN>((#{page} - 1) * #{rows})
		
	</select>
	<select id="selectZdxxListCount" parameterType="zdxx" resultType="int">
		select count(*) from ZDXXB 
		where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{gydw}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
	</select>
	<insert id="insertzdxx" parameterType="zdxx">
		insert into ZDXXB(id,gydw,gydwmc,lxbm,lxmc,qdzh,zdzh,zdsj,zhlb,qtcs,yjhfsj,tbdw,tbdwmc,tjr,shry,tbsj,sfhf)
		values(sys_guid(),#{gydw},#{gydwmc},#{lxbm},#{lxmc},#{qdzh},#{zdzh},#{zdsj},#{zhlb},#{qtcs},#{yjhfsj},#{tbdw},#{tbdwmc},#{tjr},#{shry},#{tbsj},#{sfhf})
	</insert>
	<delete id="deletezdxx" parameterType="zdxx">
	delete from ZDXXB where id=#{id}
	</delete>
	<update id="updatezdxx" parameterType="zdxx">
	update ZDXXB set
	gydw=#{gydw},gydwmc=#{gydwmc},lxbm=#{lxbm},lxmc=#{lxmc},qdzh=#{qdzh},zdzh=#{zdzh},zdsj=#{zdsj},zhlb=#{zhlb},qtcs=#{qtcs},yjhfsj=#{yjhfsj},tbdw=#{tbdw},tbdwmc=#{tbdwmc},tjr=#{tjr},shry=#{shry},tbsj=#{tbsj},sfhf=#{sfhf}
	where id=#{id}
	</update>
</mapper>