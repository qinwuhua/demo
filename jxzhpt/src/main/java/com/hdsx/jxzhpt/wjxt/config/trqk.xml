<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "/xsd/mybatis-3-mapper.dtd">
<mapper namespace="com.hdsx.jxzhpt.trqk">

	<select id="selectTrqkList" parameterType="trqk" resultType="trqk">
		select * from (
		select m.*,rownum rn from (
			select * from WJXT_TRQK
			where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{jhid}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
		order by tbsj desc
		)  m
			where <![CDATA[rownum<=(#{page} * #{rows})]]>
		) 
			where RN>((#{page} - 1) * #{rows})
		
	</select>
	<select id="selectTrqkListCount" parameterType="trqk" resultType="int">
		select count(*) from WJXT_TRQK 
		where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{jhid}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
	</select>
	<insert id="insertTrqk" parameterType="trqk">
		insert into WJXT_TRQK(id,gydw,qxrs,trqxjf,lq,sn,ss,bzd,gyy,lqlbl,wjj,zzj,zxqc,cstb,sbtbxj,tbdw,tjr,shry,tbsj,gydwmc,tbdwmc)
		values(sys_guid(),#{gydw},#{qxrs},#{trqxjf},#{lq},#{sn},#{ss},#{bzd},#{gyy},#{lqlbl},#{wjj},#{zzj},#{zxqc},#{cstb},#{sbtbxj},#{tbdw},#{tjr},#{shry},#{tbsj},#{gydwmc},#{tbdwmc})
	</insert>
</mapper>