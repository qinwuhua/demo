<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "/xsd/mybatis-3-mapper.dtd">
<mapper namespace="com.hdsx.jxzhpt.trqk">
	<select id="selectTrqkList1" parameterType="trqk" resultType="trqk">
			select * from WJXT_TRQK
			where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{gydw}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
		order by tbsj desc
		
	</select>
	<select id="selectTrqkList" parameterType="trqk" resultType="trqk">
		select * from (
		select m.*,rownum rn from (
			select * from WJXT_TRQK
			where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{gydw}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
		order by tbsj desc
		)  m
			where <![CDATA[rownum<=(#{page} * #{rows})]]>
		) 
			where RN>((#{page} - 1) * #{rows})
		
	</select>
	<select id="selectTrqkListCount" parameterType="trqk" resultType="int">
		select count(*) from WJXT_TRQK 
		where 1=1 
		<if test="gydw != null and  gydw != ''">
			and gydw like '%'||#{gydw}||'%'
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			and tbsj like #{tiaojian}||'%'
		</if>
	</select>
	<insert id="insertTrqk" parameterType="trqk">
		insert into WJXT_TRQK(id,gydw,qxrs,trqxjf,lq,sn,ss,bzd,gyy,lqlbl,wjj,zzj,zxqc,cstb,sbtbxj,tbdw,tjr,shry,tbsj,gydwmc,tbdwmc)
		values(sys_guid(),#{gydw},#{qxrs},#{trqxjf},#{lq},#{sn},#{ss},#{bzd},#{gyy},#{lqlbl},#{wjj},#{zzj},#{zxqc},#{cstb},#{sbtbxj},#{tbdw},#{tjr},#{shry},#{tbsj},#{gydwmc},#{tbdwmc})
	</insert>
	<insert id="insertLqpdmxb" parameterType="lkmxb">
		insert into LKPD_MXB(id,tbdw,tbnf,dwfzr,tjfzr,tjf,tbrq,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{dwfzr},#{tjfzr},#{tjf},#{tbrq},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertLqpdmxb1" parameterType="lkmxb">
		insert into LKPD_MXB2014(id,tbdw,tbnf,bw,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{bw},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertLqpdmxbdata" parameterType="hashMap">
		insert into LKPD_MXB_DATA(id,mxb_id,lxbh,lxmc,qdzh,zdzh,qjfx,pdlc,mqi,pqi,sci,bci,tci,ydl,ldl,zdl,cdl,cadl,yllv)
		values(#{id},#{mxb_id},#{0},#{1},#{2},#{3},#{4},#{5},round(#{6},1),round(#{7},1),round(#{8},1),round(#{9},1),round(#{10},1),#{11},#{12},#{13},#{14},#{15},#{16})
	</insert>
	<insert id="insertLqpdmxbdata1" parameterType="hashMap">
		insert into LKPD_MXB_DATA_2014
		values(#{id},#{mxb_id},#{0},#{1},#{2},#{3},#{4},#{5},round(#{8},1),round(#{9},1),round(#{15},1),round(#{16},1),round(#{17},1),#{6},#{7},round(#{10},1),round(#{11},1),round(#{12},1),round(#{13},1),round(#{14},1),#{18})
	</insert>
	<select id="selectMxbList" parameterType="lkmxb" resultType="lkmxb">
		select id,tbdw,tbnf,dwfzr,tjfzr,tjf,tbrq,mxbbt,mxbym,bt1,bt2,bt3,bt4,bt5 from LKPD_MXB where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	
	<select id="selectMxbList1" parameterType="lkmxb" resultType="lkmxb">
		select id,tbdw,tbnf,bw,bt1,bt2,bt3,bt4,bt5 from LKPD_MXB2014 where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	<select id="getMxbDataList" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_MXB_DATA  where mxb_id=#{id} order by to_number(id)
	</select>
	<select id="getMxbDataList1" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_MXB where id=#{id}
	</select>
	<select id="getMxbDataList2" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_MXB_DATA_2014  where mxb_id=#{id} order by to_number(id)
	</select>
	<select id="getMxbDataList3" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_MXB2014 where id=#{id}
	</select>
	<delete id="deletemxb" parameterType="lkmxb" >
		delete from LKPD_MXB_DATA  where mxb_id=#{id}
	</delete>
	<delete id="deletemxb1" parameterType="lkmxb" >
		delete from LKPD_MXB where id=#{id}
	</delete>
	
	<delete id="deletemxb2" parameterType="lkmxb" >
		delete from LKPD_MXB_DATA_2014  where mxb_id=#{id}
	</delete>
	<delete id="deletemxb3" parameterType="lkmxb" >
		delete from LKPD_MXB2014 where id=#{id}
	</delete>
	
	<insert id="insertLktjb" parameterType="lktjb">
		insert into LKPD_TJB(id,tbdw,tbnf,dwfzr,fzr,tbr,tbrq,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{dwfzr},#{fzr},#{tbr},#{tbrq},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertLktjbData" parameterType="hashMap">
		insert into LKPD_TJB_DATA(id,tjb_id,biaoti,xm,bh,hj,ydl,ldl,zdl,cdl,cadl,yllv,pdjg)
		values(#{id},#{tjb_id},#{0},#{1},#{bh},#{3},#{4},#{5},#{6},#{7},#{8},#{9},#{10})
	</insert>
	<select id="selectTjbList" parameterType="lktjb" resultType="lktjb">
		select id,tbdw,tbnf,dwfzr,fzr,tbr,tbrq,bt1,bt2,bt3,bt4,bt5 from LKPD_TJB where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	<select id="getTjbDataList" parameterType="lktjb" resultType="lktjb">
		select * from LKPD_TJB_DATA  where tjb_id=#{id} order by to_number(id)
	</select>
	<select id="getTjbDataList1" parameterType="lktjb" resultType="lktjb">
		select * from LKPD_TJB where id=#{id}
	</select>
		<delete id="deletetjb" parameterType="lktjb" >
		delete from LKPD_TJB_DATA  where tjb_id=#{id}
	</delete>
	<delete id="deletetjb1" parameterType="lktjb" >
		delete from LKPD_TJB where id=#{id}
	</delete>
	
	<insert id="insertJtlhz" parameterType="jtlhz">
		insert into JTLHZ(id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,bcrq,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{dwfzr},#{tjfzr},#{tbr},#{lxdh},#{bcrq},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertJtlhzdata" parameterType="hashMap">
		insert into JTLHZ_DATA(id,hzb_id,gljgmc,gljgbh,hj,sj,dsj,xxj,hxj,hgd,hsd,hqt,lxj,lgd,lsd,lqt,jxj,jgd,jsd,jqt,bxj,bgd,bsd,bqt,cxj,cgd,csd,cqt,gcry,gcjl,njf)
		values(#{id},#{hzb_id},#{0},#{1},#{3},#{4},#{5},#{6},#{7},#{8},#{9},#{11},#{12},#{13},#{14},#{15},#{16},#{17},#{18},#{20},#{21},#{22},#{23},#{25},#{26},#{27},#{28},#{29},#{31},#{33},#{34})
	</insert>
	<select id="selectJtlList" parameterType="jtlhz" resultType="jtlhz">
		select id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,bcrq,bt1,bt2,bt3,bt4,bt5 from JTLHZ where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	<select id="getJtlDataList" parameterType="jtlhz" resultType="jtlhz">
		select * from JTLHZ_DATA  where hzb_id=#{id} order by to_number(id)
	</select>
	<select id="getJtlDataList1" parameterType="jtlhz" resultType="jtlhz">
		select * from JTLHZ where id=#{id}
	</select>
	<delete id="deletejtl" parameterType="jtlhz" >
		delete from JTLHZ_DATA  where hzb_id=#{id}
	</delete>
	<delete id="deletejtl1" parameterType="jtlhz" >
		delete from JTLHZ where id=#{id}
	</delete>
	
	<insert id="insertJtlhzgd" parameterType="jtlhzgd">
		insert into JTLHZGD(id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,rq,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{dwfzr},#{tjfzr},#{tbr},#{lxdh},#{rq},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertJtlhzgddata" parameterType="hashMap">
		insert into JTLHZGD_DATA(id,hzb_id,lxbh,lxmc,gclc,jdls,jzrs,qdls,qzrs,xhc,zhc,dhc,thc,jzxc,zxkc,dkc,mtc,tdls,tzrs,xsl,jtl,yjd)
		values(#{id},#{hzb_id},#{0},#{1},#{2},#{3},#{4},#{5},#{6},#{7},#{8},#{9},#{10},#{11},#{12},#{13},#{14},#{15},#{16},#{17},#{18},#{19})
	</insert>
	<select id="selectJtlgdList" parameterType="jtlhzgd" resultType="jtlhzgd">
		select id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,rq,bt1,bt2,bt3,bt4,bt5 from JTLHZGD where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	<select id="getJtlgdDataList" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from JTLHZGD_DATA  where hzb_id=#{id} order by to_number(id)
	</select>
	<select id="getJtlgdDataList1" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from JTLHZGD where id=#{id}
	</select>
	<delete id="deletejtlgd" parameterType="jtlhzgd" >
		delete from JTLHZGD_DATA  where hzb_id=#{id}
	</delete>
	<delete id="deletejtlgd1" parameterType="jtlhzgd" >
		delete from JTLHZGD where id=#{id}
	</delete>
	
	<insert id="insertJtlhzsd" parameterType="jtlhzgd">
		insert into JTLHZSD(id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,rq,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{dwfzr},#{tjfzr},#{tbr},#{lxdh},#{rq},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	<insert id="insertJtlhzsddata" parameterType="hashMap">
		insert into JTLHZSD_DATA(id,hzb_id,lxbh,lxmc,gclc,jdls,jzrs,qdls,qzrs,xhc,zhc,dhc,thc,jzxc,zxkc,dkc,mtc,tdls,tzrs,xsl,jtl,yjd)
		values(#{id},#{hzb_id},#{0},#{1},#{2},#{3},#{4},#{5},#{6},#{7},#{8},#{9},#{10},#{11},#{12},#{13},#{14},#{15},#{16},#{17},#{18},#{19})
	</insert>
	<select id="selectJtlsdList" parameterType="jtlhzgd" resultType="jtlhzgd">
		select id,tbdw,tbnf,dwfzr,tjfzr,tbr,lxdh,rq,bt1,bt2,bt3,bt4,bt5 from JTLHZSD where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	<select id="getJtlsdDataList" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from JTLHZSD_DATA  where hzb_id=#{id} order by to_number(id)
	</select>
	<select id="getJtlsdDataList1" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from JTLHZSD where id=#{id}
	</select>
	<delete id="deletejtlsd" parameterType="jtlhzgd" >
		delete from JTLHZSD_DATA  where hzb_id=#{id}
	</delete>
	<delete id="deletejtlsd1" parameterType="jtlhzgd" >
		delete from JTLHZSD where id=#{id}
	</delete>
	<update id="updateTrqk" parameterType="trqk">
		update WJXT_TRQK set
		gydw=#{gydw},qxrs=#{qxrs},trqxjf=#{trqxjf},lq=#{lq},sn=#{sn},ss=#{ss},bzd=#{bzd},gyy=#{gyy},lqlbl=#{lqlbl},wjj=#{wjj},zzj=#{zzj},zxqc=#{zxqc},cstb=#{cstb},sbtbxj=#{sbtbxj},tbdw=#{tbdw},tjr=#{tjr},shry=#{shry},tbsj=#{tbsj},gydwmc=#{gydwmc},tbdwmc=#{tbdwmc}
		where id=#{id}
	</update>
	<delete id="deletetrqk" parameterType="trqk">
	delete from WJXT_TRQK where id=#{id}
	</delete>
	<select id="getPqiList" parameterType="lkmxb" resultType="lkmxb">
		select * from(
			select t1.*,t2.tbnf from LKPD_MXB_DATA t1,lkpd_mxb t2 where t1.mxb_id=t2.id(+) and lxbh not like '合计'
		)
		where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		<if test="tiaojian != null and  tiaojian != ''">
			${tiaojian}
		</if>
		
	</select>
	<select id="selectLqpdmxbdata" parameterType="lkmxb" resultType="lkmxb">
		select * from lkpd_mxb where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="selectLqpdmxbdata1" parameterType="lkmxb" resultType="lkmxb">
		select * from lkpd_mxb2014 where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="selectLktjbdata" parameterType="lktjb" resultType="lktjb">
		select * from lkpd_tjb where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="selectJtlhzdata" parameterType="jtlhz" resultType="jtlhz">
		select * from jtlhz where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="selectJtlhzgddata" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from jtlhzgd where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="selectJtlhzsddata" parameterType="jtlhzgd" resultType="jtlhzgd">
		select * from jtlhzsd where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	<select id="downLkpdmxbFile" parameterType="lkmxb" resultType="wjgl">
		select * from LKPD_MXB where id=#{id}
	</select>
	<select id="downLkpdmxbFile1" parameterType="lkmxb" resultType="wjgl">
		select * from LKPD_MXB2014 where id=#{id}
	</select>
	<select id="downLkpdtjbFile" parameterType="lkmxb" resultType="wjgl">
		select * from LKPD_TJB where id=#{id}
	</select>
	<select id="downjtqkhzbFile" parameterType="lkmxb" resultType="wjgl">
		select * from JTLHZ where id=#{id}
	</select>
	<select id="downjtqkhzbgdFile" parameterType="lkmxb" resultType="wjgl">
		select * from JTLHZGD where id=#{id}
	</select>
	<select id="downjtqkhzbsdFile" parameterType="lkmxb" resultType="wjgl">
		select * from JTLHZSD where id=#{id}
	</select>
	
	<!-- zyy add 路况汇总表20170316 -->
	
	<select id="selectHzbList" parameterType="lkmxb" resultType="lkmxb">
		select id,tbdw,tbnf,bw,bt1,bt2,bt3,bt4,bt5 from LKPD_LKHZB where 1=1
		<if test="tbnf != null and  tbnf != ''">
			and tbnf = #{tbnf}
		</if>
		order by tbnf desc
	</select>
	
	<select id="selectLkhzmxbdata" parameterType="lkmxb" resultType="lkmxb">
		select * from lkpd_lkhzb where tbnf=#{tbnf} and tbdw=#{tbdw}
	</select>
	
	<insert id="insertLkhzmxb" parameterType="lkmxb">
		insert into LKPD_LKHZB(id,tbdw,tbnf,bw,wjfile,bt1,bt2,bt3,bt4,bt5)
		values(#{id},#{tbdw},#{tbnf},#{bw},#{wjfile},#{bt1},#{bt2},#{bt3},#{bt4},#{bt5})
	</insert>
	
	<insert id="insertLkhzmxbdata" parameterType="hashMap">
		insert into LKPD_LKHZB_DATA
		values(#{id},#{hzb_id},#{0},#{1},#{2},#{3},#{4},round(#{5},1),round(#{6},1),round(#{7},1),round(#{8},1),round(#{9},1),round(#{10},1),round(#{11}),round(#{12}),round(#{13},1),round(#{14},1),round(#{15},1),round(#{16},1))
	</insert>
	
	<select id="downLkhzmxbFile" parameterType="lkmxb" resultType="wjgl">
		select * from LKPD_LKHZB where id=#{id}
	</select>
	
	<delete id="deletehzb1" parameterType="lkmxb" >
		delete from LKPD_LKHZB_DATA  where hzb_id=#{id}
	</delete>
	<delete id="deletehzb2" parameterType="lkmxb" >
		delete from LKPD_LKHZB where id=#{id}
	</delete>
	
	<select id="getHzmxbDataList" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_LKHZB_DATA  where hzb_id=#{id} order by to_number(id)
	</select>
	
	<select id="getHzbDataList" parameterType="lkmxb" resultType="lkmxb">
		select * from LKPD_LKHZB where id=#{id}
	</select>
</mapper>