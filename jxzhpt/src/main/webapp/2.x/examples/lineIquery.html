<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="../theme/default/style.css" type="text/css">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script src="../lib/OpenLayers.js"></script>
    <script src="../../framework/jquery-1.8.0.min.js"></script>
    <script src="../../framework/jquery.tabletojson.js"></script>

    <script type="text/javascript">
        var lon = 115.94040;
        var lat = 27.55343;
        var zoom = 8;
        var map, layer, click, selected;

        //路线i查询
        function init() {
            OpenLayers.ProxyHost = "http://localhost:8080/arcgisproxy/cgi/proxy.cgi?url=";
            map = new OpenLayers.Map('map');
            layer = new OpenLayers.Layer.WMS("layer",
                    "http://211.101.37.234:8080/hdmapserver/wms", {
                        layers: 'jiangximap:jx_dist'
                    });
            map.addLayer(layer);

            map.setCenter(new OpenLayers.LonLat(lon, lat), zoom);
            OpenLayers.Request.issue({
                url: 'http://211.101.37.234:8080/hdmapserver/wms',
                method: 'GET',
                params: {
                    service: 'WFS',
                    version: '1.0.0',
                    request: 'GetFeature',
                    outputFormat: 'json',
                    featureID: "jx_gaosu.5",
                    typeName: 'jiangximap:jx_gaosu',
                    success: processResponse
                },
                callback: processResponse
            });

        }
        function processResponse(response) {
            var data = response.responseText;
            var geojson_format = new OpenLayers.Format.GeoJSON();
            var features = geojson_format.read(data, null, null)[0];
            var v = OpenLayers.Feature.Vector("line", {
                geometry: features.geometry,
                attributes: features.attributes
            });
            //通过fID得到想要的要素
            debugger;
        }
    </script>
</head>
<body onload="init()">
<h1 id="title">WMS Demo</h1>

<div id="map" class="smallmap"></div>
</body>
</html>